<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <h2 class="text-xl font-bold mb-4">Task Form</h2>
        <form id="taskForm">
            <div id="tasksContainer">
                <div class="task-entry border p-4 mb-4 rounded-lg bg-gray-50">
                    <label class="block font-semibold">Task Name: <span class="text-red-500">*</span></label>
                    <input type="text" class="task-name w-full p-2 border rounded" placeholder="Enter the Task Name">
                    <p class="error-message text-red-500 text-sm hidden">This field is required.</p>
                    
                    <label class="block font-semibold mt-2">Priority: <span class="text-red-500">*</span></label>
                    <select class="task-priority w-full p-2 border rounded">
                        <option value="">Select Priority</option>
                        <option value="High">High</option>
                        <option value="Medium">Medium</option>
                        <option value="Low">Low</option>
                    </select>
                    <p class="error-message text-red-500 text-sm hidden">Please select a priority.</p>
                    
                    <label class="block font-semibold mt-2">Description: <span class="text-red-500">*</span></label>
                    <textarea class="task-description w-full p-2 border rounded" placeholder="Enter a detailed description"></textarea>
                    <p class="error-message text-red-500 text-sm hidden">This field is required.</p>
                    
                    <label class="block font-semibold mt-2">Estimated Time: <span class="text-red-500">*</span></label>
                    <div class="flex space-x-2">
                        <input type="number" class="task-time w-1/2 p-2 border rounded" placeholder="Enter time">
                        <select class="task-unit w-1/2 p-2 border rounded">
                            <option value="">Select Unit</option>
                            <option value="Minutes">Minutes</option>
                            <option value="Hours">Hours</option>
                        </select>
                    </div>
                    <p class="error-message text-red-500 text-sm hidden">Please enter a valid estimated time and unit.</p>
                </div>
            </div>
            
            <button type="button" id="addTask" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Add Task</button>
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Submit All</button>
        </form>
    </div>
    
    <script>
        document.getElementById('addTask').addEventListener('click', function() {
            let taskContainer = document.getElementById('tasksContainer');
            let newTask = taskContainer.firstElementChild.cloneNode(true);
            newTask.querySelectorAll('input, select, textarea').forEach(field => {
                field.value = "";
                field.classList.remove("border-red-500");
            });
            newTask.querySelectorAll('.error-message').forEach(error => error.classList.add("hidden"));
            taskContainer.appendChild(newTask);
        });

        document.getElementById('taskForm').addEventListener('submit', function(event) {
            event.preventDefault();
            let valid = true;
            
            document.querySelectorAll('.task-entry').forEach(task => {
                task.querySelectorAll('.error-message').forEach(error => error.classList.add("hidden"));
                task.querySelectorAll('input, select, textarea').forEach(field => field.classList.remove("border-red-500"));
                
                let name = task.querySelector('.task-name');
                let priority = task.querySelector('.task-priority');
                let description = task.querySelector('.task-description');
                let time = task.querySelector('.task-time');
                let unit = task.querySelector('.task-unit');

                if (!name.value.trim()) {
                    name.nextElementSibling.classList.remove("hidden");
                    name.classList.add("border-red-500");
                    valid = false;
                }
                if (!priority.value) {
                    priority.nextElementSibling.classList.remove("hidden");
                    priority.classList.add("border-red-500");
                    valid = false;
                }
                if (!description.value.trim()) {
                    description.nextElementSibling.classList.remove("hidden");
                    description.classList.add("border-red-500");
                    valid = false;
                }
                if (!time.value || parseInt(time.value) <= 0 || !unit.value) {
                    time.parentElement.nextElementSibling.classList.remove("hidden");
                    time.classList.add("border-red-500");
                    unit.classList.add("border-red-500");
                    valid = false;
                }
            });

            if (valid) {
                alert("Tasks submitted successfully!");
                document.getElementById('taskForm').reset();
                document.getElementById('tasksContainer').innerHTML = document.getElementById('tasksContainer').firstElementChild.outerHTML;
            }
        });
    </script>
</body>
</html>
